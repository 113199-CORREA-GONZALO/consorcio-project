<div class="container mt-5">
    <h3>Lista de Proveedores</h3>
      <!-- Formulario de filtros -->
      <form [formGroup]="filterForm" class="mb-3">
        <div class="row align-items-end">
          <div class="col-md-3 mb-3">
            <label for="filterState" class="form-label">Estado:</label>
            <select id="filterState" formControlName="state" class="form-select">
              <option value="">Todos</option>
              <option *ngFor="let state of statusTypes" [value]="state">{{ state }}</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label for="filterCUIL" class="form-label">CUIL:</label>
            <div class="input-group">
              <input type="text" id="filterCUIL" formControlName="cuil" class="form-control w-50 rounded-start">
              <button class="btn btn-primary ms-2 rounded" type="button" (click)="searchByCUIL()">Buscar</button>
              <button class="btn btn-secondary ms-2 rounded" type="button" (click)="clearSearch()">Limpiar</button>
            </div>
          </div>
          <div class="col-md-2 mb-3">
            <button class="btn btn-success me-2" (click)="exportToExcel()">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-file-earmark-excel" viewBox="0 0 16 16">
                <path d="M5.884 6.68a.5.5 0 1 0-.768.64L7.349 10l-2.233 2.68a.5.5 0 0 0 .768.64L8 10.781l2.116 2.54a.5.5 0 0 0 .768-.641L8.651 10l2.233-2.68a.5.5 0 0 0-.768-.64L8 9.219l-2.116-2.54z" />
                <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z" />
              </svg>
            </button>
            <button class="btn btn-danger" (click)="exportToPDF()">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-filetype-pdf" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.6 11.85H0v3.999h.791v-1.342h.803q.43 0 .732-.173.305-.175.463-.474a1.4 1.4 0 0 0 .161-.677q0-.375-.158-.677a1.2 1.2 0 0 0-.46-.477q-.3-.18-.732-.179m.545 1.333a.8.8 0 0 1-.085.38.57.57 0 0 1-.238.241.8.8 0 0 1-.375.082H.788V12.48h.66q.327 0 .512.181.185.183.185.522m1.217-1.333v3.999h1.46q.602 0 .998-.237a1.45 1.45 0 0 0 .595-.689q.196-.45.196-1.084 0-.63-.196-1.075a1.43 1.43 0 0 0-.589-.68q-.396-.234-1.005-.234zm.791.645h.563q.371 0 .609.152a.9.9 0 0 1 .354.454q.118.302.118.753a2.3 2.3 0 0 1-.068.592 1.1 1.1 0 0 1-.196.422.8.8 0 0 1-.334.252 1.3 1.3 0 0 1-.483.082h-.563zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638z" />
              </svg>
            </button>
          </div>
        </div>
      </form>
    
      <div class="table-responsive">
        <table id="providersTable" class="table table-striped table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>Nombre</th>
              <th>CUIL</th>
              <th>Servicio</th>
              <th>Dirección</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of providerList; trackBy: trackByFn">
              <td>{{ item.name }}</td>
              <td>{{ item.cuil }}</td>
              <td>{{ item.service }}</td>
              <td>{{ getAddressById(item.addressId) }}</td> <!-- Usamos el método para obtener la dirección -->
              <td>{{ item.enabled ? 'Activo' : 'Inactivo' }}</td>
              <td>
                <button *ngIf="item.id !== undefined" (click)="editProvider(item.id!)" class="btn btn-warning btn-sm">Editar</button>
                <button *ngIf="item.id !== undefined" (click)="deleteProvider(item.id!)" class="btn btn-danger btn-sm">Eliminar</button>
              </td>              
            </tr>
          </tbody>
        </table>
      </div>
</div> 