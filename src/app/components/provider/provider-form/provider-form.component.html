<div class="card">
  <div class="card-body">
<div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-10">
        <h3 class="text-center">{{ isEditMode ? 'Editar Proveedor' : 'Agregar Nuevo Proveedor' }}</h3>
        <form [formGroup]="providerForm" (ngSubmit)="onSubmit()" class="form-group">
          <div class="row">
            <div class="col-md-6">
              <label for="name">Nombre</label>
              <input id="name" formControlName="name" class="form-control" 
                     [ngClass]="{
                       'is-invalid': providerForm.get('name')?.invalid && providerForm.get('name')?.touched, 
                       'is-valid': providerForm.get('name')?.valid && providerForm.get('name')?.touched
                     }" />
              <div class="invalid-feedback" *ngIf="providerForm.get('name')?.invalid && providerForm.get('name')?.touched">
                El nombre es requerido.
              </div>
            </div>
            
            <div class="col-md-6">
              <label for="cuil">CUIL</label>
              <input id="cuil" formControlName="cuil" class="form-control" 
                     [ngClass]="{
                       'is-invalid': providerForm.get('cuil')?.invalid && providerForm.get('cuil')?.touched, 
                       'is-valid': providerForm.get('cuil')?.valid && providerForm.get('cuil')?.touched
                     }" />
              <div class="invalid-feedback" *ngIf="providerForm.get('cuil')?.invalid && providerForm.get('cuil')?.touched">
                El CUIL debe tener 11 caracteres.
              </div>
            </div>
          </div>
  
          <div class="row mt-3">
            <div class="col-md-6">
              <label for="service">Servicio</label>
              <input id="service" formControlName="service" class="form-control" 
                     [ngClass]="{
                       'is-invalid': providerForm.get('service')?.invalid && providerForm.get('service')?.touched, 
                       'is-valid': providerForm.get('service')?.valid && providerForm.get('service')?.touched
                     }" />
              <div class="invalid-feedback" *ngIf="providerForm.get('service')?.invalid && providerForm.get('service')?.touched">
                El servicio es requerido.
              </div>
            </div>

            <div class="col-md-6">
              <label for="contact">Contacto</label>
              <input id="contact" formControlName="contact" class="form-control"
                     [ngClass]="{
                       'is-invalid': providerForm.get('contact')?.invalid && providerForm.get('contact')?.touched, 
                       'is-valid': providerForm.get('contact')?.valid && providerForm.get('contact')?.touched
                     }" />
              <div class="invalid-feedback" *ngIf="providerForm.get('contact')?.invalid && providerForm.get('contact')?.touched">
                El contacto es requerido.
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-12">
              <label for="address">Dirección</label>
              <input id="address" formControlName="address" class="form-control"
                     [ngClass]="{
                       'is-invalid': providerForm.get('address')?.invalid && providerForm.get('address')?.touched, 
                       'is-valid': providerForm.get('address')?.valid && providerForm.get('address')?.touched
                     }" />
              <div class="invalid-feedback" *ngIf="providerForm.get('address')?.invalid && providerForm.get('address')?.touched">
                La dirección es requerida.
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              <label for="details">Detalles</label>
              <textarea id="details" formControlName="details" class="form-control" 
                        [ngClass]="{
                          'is-invalid': providerForm.get('details')?.invalid && providerForm.get('details')?.touched, 
                          'is-valid': providerForm.get('details')?.valid && providerForm.get('details')?.touched
                        }">
              </textarea>
              <div class="invalid-feedback" *ngIf="providerForm.get('details')?.invalid && providerForm.get('details')?.touched">
                Los detalles son requeridos.
              </div>
            </div>
          </div>
  
          <div class="row mt-3">
            <div class="col-md-12 text-end">
              <button type="button" class="btn btn-secondary me-2" (click)="resetForm()" *ngIf="isEditMode">Cancelar</button>
              <button type="submit" class="btn btn-primary" [disabled]="providerForm.invalid">{{ isEditMode ? 'Actualizar' : 'Guardar' }}</button>
            </div>
          </div>
        </form>
        <div class="d-flex justify-content-end">
          <button class="btn btn-secondary ms-3 custom-button" (click)="showInfo()">
              <i class="bi bi-info-circle"></i>
          </button>
      </div>
      </div>
    </div>
  </div>
  
  <ng-template #infoModal let-modal>
    <div class="modal-header fs-6 py-1">
        <h4 class="modal-title">Formulario de Proveedores</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
      </div>
      <div class="modal-body fs-6 py-2">
        <div class="container-fluid">
          <!-- Introducción -->
          <div class="alert alert-info mb-2 py-2">
            <h5 class="alert-heading">¿Qué es esta pantalla?</h5>
            <p class="mb-0 small">Esta pantalla te permite registrar un proveedor.</p>
          </div>
      
          <!-- Campos Principales -->
          <div class="card mb-2">
            <div class="card-header py-1">
              <h5 class="mb-0">Datos de Proveedores</h5>
            </div>
            <div class="card-body py-2">
              <ul class="list-group list-group-flush">
                <li class="list-group-item py-1">
                  <strong>Campos a ingresar:</strong> Se solicitarán: Nombre, CUIL, Servicio, Contacto, Dirección y Detalles.
                </li>
                <li class="list-group-item py-1">
                    <strong>ATENCIÓN:</strong> La opción de GUARDAR solo se habilitará si todos los campos se encuentran correctamente completados.
                  </li>
              </ul>
            </div>
          </div>
      
          <!-- Acciones -->
          <div class="card mb-2">
            <div class="card-header py-1">
              <h5 class="mb-0">Acciones Disponibles</h5>
            </div>
            <div class="card-body py-2">
              <ul class="list-group list-group-flush">
                <li class="list-group-item py-1">
                  <strong>Guardar:</strong> En caso de que todos los campos se encuentren correctamente completados se guardará el nuevo proveedor.
                </li>
              </ul>
            </div>
          </div>
      
          <!-- Nota (OPCIONAL) -->
          <div class="alert alert-warning py-2 mb-0">
            <h5 class="alert-heading">Nota:</h5>
            <p class="mb-0 small">Asegúrate de verificar la información antes de dar el alta de un proveedor.</p>
          </div>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-primary" (click)="modal.close()">Entendido</button>
      </div>
      
  </ng-template>
